<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>지도</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.js"></script>

</head>
<body>

<div class="add_address" id="add_address">
    <label for="address_kakao">주소 추가</label>
    <input type="text" id="address_kakao" name="address_kakao" class="form-control" required>
</div>
<button class="btn" id="addFriend">인원추가</button>
<button class="btn" id="add1" onclick="button1_click();">추가하기</button>


<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=63f44951e06875b4db337f3ca80193fd&libraries=services"></script>

<div id="map" style="width:1900px;height:900px;"></div>

<!--주소 검색을 위한 스크립트-->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script>


    let temp=1;
    $('#addFriend').click(function(){
        var add_address = document.getElementById('add_address')
        var input = document.createElement('input')
        input.setAttribute('type','text')
        // input.setAttribute('id','address_kakao')
        // input.setAttribute('class','address_kakao')
        input.setAttribute('name','address_kakao' +temp)
        add_address.appendChild(input);
        temp++;

        // $('input[name^="address_kakao"]').click(function(){
        input.addEventListener('click',function(){

            console.log("클릭")
            var tt = this
            //카카오 지도 발생
            new daum.Postcode({
                oncomplete: function (data) { //선택시 입력값 세팅
                    console.log(data.address)
                    console.log(tt)
                    tt.value=data.address; // 주소 넣기
                    // document.querySelector("input[name=address_detail]").focus(); //상세입력 포커싱
                }
            }).open();
        })
    })

    $('input[name="address_kakao"]').click(function(){
        console.log("클릭")
        //카카오 지도 발생
        new daum.Postcode({
            oncomplete: function (data) { //선택시 입력값 세팅
                console.log(data.address)
                $('input[name="address_kakao"]').val(data.address); // 주소 넣기
                // document.querySelector("input[name=address_detail]").focus(); //상세입력 포커싱
            }
        }).open();
    })


    // window.onload = function () {
    //     document.getElementById("address_kakao").addEventListener("click", function () { //주소입력칸을 클릭하면
    //         //카카오 지도 발생
    //         new daum.Postcode({
    //             oncomplete: function (data) { //선택시 입력값 세팅
    //                 document.getElementById("address_kakao").value = data.address; // 주소 넣기
    //                 // document.querySelector("input[name=address_detail]").focus(); //상세입력 포커싱
    //             }
    //         }).open();
    //     });
    // }
</script>


<!--카카오맵 스크립트-->
<script>
    var cnt=0;
    var sum_y=0;
    var sum_x=0;

    var result_x;
    var result_y;

    var mapContainer = document.getElementById('map'), // 지도를 표시할 div
        mapOption = {
            center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
            level: 3 // 지도의 확대 레벨
        };

    // 지도를 생성합니다
    var map = new kakao.maps.Map(mapContainer, mapOption);

    function button1_click() {


        var address1 = document.getElementById('address_kakao').value;
        // 주소-좌표 변환 객체를 생성합니다
        var geocoder = new kakao.maps.services.Geocoder();
        console.log(geocoder);
        // 주소로 좌표를 검색합니다
        geocoder.addressSearch(address1, function (result, status) {

            // 정상적으로 검색이 완료됐으면
            if (status === kakao.maps.services.Status.OK) {

                // var coords = new kakao.maps.LatLng(result[0].y, result[0].x);


                // 결과값으로 받은 위치를 마커로 표시합니다
                // var marker = new kakao.maps.Marker({
                //     map: map,
                //     position: coords
                // });


                     var points = [
                         // new kakao.maps.LatLng(33.452278, 126.567803),
                         // new kakao.maps.LatLng(33.452671, 126.574792),
                         // new kakao.maps.LatLng(33.451744, 126.572441)
                         new kakao.maps.LatLng(result[0].y, result[0].x)
                     ];
                console.log(typeof(result[0].x));

                // sum_x += result[0].y;
                // sum_y += result[0].x;

                sum_x += parseFloat(result[0].x);
                sum_y += parseFloat(result[0].y);


                console.log('누적x값',sum_x);
                console.log('누적y값',sum_y);


                console.log('중앙x',sum_x/2);
                console.log('중앙y',sum_y/2);

                result_x =String(sum_x/2);
                result_y =String(sum_y/2);

                console.log('string 중앙x',result_x);
                console.log('string 중앙y',result_y);

                // 지도를 재설정할 범위정보를 가지고 있을 LatLngBounds 객체를 생성합니다
                var bounds = new kakao.maps.LatLngBounds();

                var i, marker;
                for (i = 0; i < points.length; i++) {
                    // 배열의 좌표들이 잘 보이게 마커를 지도에 추가합니다
                    marker = new kakao.maps.Marker({ position : points[i] });
                    marker.setMap(map);
                    console.log('-------point 값-------',points[i]);
                    // LatLngBounds 객체에 좌표를 추가합니다
                    bounds.extend(points[i]);
                }

                if(cnt>0) {

                    var coords = new kakao.maps.LatLng(result_y, result_x);

                    // 결과값으로 받은 위치를 마커로 표시합니다
                    var marker = new kakao.maps.Marker({
                        map: map,
                        position: coords
                    });

                    // 인포윈도우로 장소에 대한 설명을 표시합니다
                    var infowindow = new kakao.maps.InfoWindow({
                        content: '<div style="width:150px;text-align:center;padding:6px 0;">여기가 중앙</div>'
                    });
                    infowindow.open(map, marker);

                    // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                    // map.setCenter(coords);

                }



                map.setBounds(bounds);

                // 인포윈도우로 장소에 대한 설명을 표시합니다
                // var infowindow = new kakao.maps.InfoWindow({
                //     content: '<div style="width:150px;text-align:center;padding:6px 0;">1</div>'
                // });
                // infowindow.open(map, marker);
                    // LatLngBounds 객체에 추가된 좌표들을 기준으로 지도의 범위를 재설정합니다
                    // 이때 지도의 중심좌표와 레벨이 변경될 수 있습니다

                // // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
                // map.setCenter(coords);


            } else {
                console.log('----------------------에러--------------------------')
            }
            cnt++;

        });


    }
</script>
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <meta charset="utf-8">-->
<!--    <title>지도 범위 재설정 하기</title>-->

<!--</head>-->
<!--<body>-->
<!--<div id="map" style="width:100%;height:350px;"></div>-->
<!--<p>-->
<!--    <button onclick="setBounds()">지도 범위 재설정 하기</button>-->
<!--</p>-->

<!--<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=63f44951e06875b4db337f3ca80193fd&libraries=services"></script>-->
<!--<script>-->
<!--    var mapContainer = document.getElementById('map'), // 지도를 표시할 div-->
<!--        mapOption = {-->
<!--            center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표-->
<!--            level: 3 // 지도의 확대 레벨-->
<!--        };-->

<!--    var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다-->

<!--    // 버튼을 클릭하면 아래 배열의 좌표들이 모두 보이게 지도 범위를 재설정합니다-->
<!--    var points = [-->
<!--        new kakao.maps.LatLng(33.452278, 126.567803),-->
<!--        new kakao.maps.LatLng(33.452671, 126.574792),-->
<!--        new kakao.maps.LatLng(33.451744, 126.572441),-->
<!--        new kakao.maps.LatLng(33.451844, 126.573441),-->
<!--        new kakao.maps.LatLng(33.455844, 126.553441),-->
<!--        new kakao.maps.LatLng(33.459844, 126.554441)-->
<!--    ];-->

<!--    // 지도를 재설정할 범위정보를 가지고 있을 LatLngBounds 객체를 생성합니다-->
<!--    var bounds = new kakao.maps.LatLngBounds();-->

<!--    var i, marker;-->
<!--    for (i = 0; i < points.length; i++) {-->
<!--        // 배열의 좌표들이 잘 보이게 마커를 지도에 추가합니다-->
<!--        marker =     new kakao.maps.Marker({ position : points[i] });-->
<!--        marker.setMap(map);-->

<!--        // LatLngBounds 객체에 좌표를 추가합니다-->
<!--        bounds.extend(points[i]);-->
<!--    }-->

<!--    function setBounds() {-->
<!--        // LatLngBounds 객체에 추가된 좌표들을 기준으로 지도의 범위를 재설정합니다-->
<!--        // 이때 지도의 중심좌표와 레벨이 변경될 수 있습니다-->
<!--        map.setBounds(bounds);-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>지도</title>-->
<!--</head>-->
<!--<body>-->

<!--<div class="add_address">-->
<!--    <label for="address_kakao">주소 추가</label>-->
<!--    <input type="text" id="address_kakao" name="address" class="form-control" required>-->
<!--</div>-->
<!--<button class="btn" id="add1" onclick="button1_click();">추가하기</button>-->



<!--<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=63f44951e06875b4db337f3ca80193fd&libraries=services"></script>-->

<!--<div id="map" style="width:1900px;height:900px;"></div>-->



<!--&lt;!&ndash;주소 검색을 위한 스크립트&ndash;&gt;-->
<!--<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>-->
<!--<script>-->
<!--    window.onload = function () {-->
<!--        document.getElementById("address_kakao").addEventListener("click", function () { //주소입력칸을 클릭하면-->
<!--            //카카오 지도 발생-->
<!--            new daum.Postcode({-->
<!--                oncomplete: function (data) { //선택시 입력값 세팅-->
<!--                    document.getElementById("address_kakao").value = data.address; // 주소 넣기-->
<!--                    // document.querySelector("input[name=address_detail]").focus(); //상세입력 포커싱-->
<!--                }-->
<!--            }).open();-->
<!--        });-->
<!--    }-->
<!--</script>-->
<!--<script>-->

<!--</script>-->


<!--&lt;!&ndash;카카오맵 스크립트&ndash;&gt;-->
<!--<script>-->


<!--    var mapContainer = document.getElementById('map'), // 지도를 표시할 div-->
<!--        mapOption = {-->
<!--            center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표-->
<!--            level: 3 // 지도의 확대 레벨-->
<!--        };-->

<!--    // 지도를 생성합니다-->
<!--    var map = new kakao.maps.Map(mapContainer, mapOption);-->

<!--    function button1_click() {-->
<!--        var address1 = document.getElementById('address_kakao').value;-->
<!--        // 주소-좌표 변환 객체를 생성합니다-->
<!--        var geocoder = new kakao.maps.services.Geocoder();-->
<!--        // 주소로 좌표를 검색합니다-->
<!--        geocoder.addressSearch(address1, function (result, status) {-->

<!--            // 정상적으로 검색이 완료됐으면-->
<!--            if (status === kakao.maps.services.Status.OK) {-->

<!--                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);-->

<!--                // 결과값으로 받은 위치를 마커로 표시합니다-->
<!--                var marker = new kakao.maps.Marker({-->
<!--                    map: map,-->
<!--                    position: coords-->
<!--                });-->

<!--                // 인포윈도우로 장소에 대한 설명을 표시합니다-->
<!--                var infowindow = new kakao.maps.InfoWindow({-->
<!--                    content: '<div style="width:150px;text-align:center;padding:6px 0;">1</div>'-->
<!--                });-->
<!--                infowindow.open(map, marker);-->

<!--                // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다-->
<!--                map.setCenter(coords);-->
<!--            } else {-->
<!--                console.log('&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;에러&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;')-->
<!--            }-->
<!--        });-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>지도</title>-->
<!--</head>-->
<!--<body>-->

<!--<div class="add_address">-->
<!--    <label for="address_kakao">주소 추가</label>-->
<!--    <input type="text" id="address_kakao" name="address" class="form-control" required>-->
<!--</div>-->
<!--<button class="btn" id="add1" onclick="button1_click();">추가하기</button>-->



<!--<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=63f44951e06875b4db337f3ca80193fd&libraries=services"></script>-->

<!--<div id="map" style="width:1900px;height:900px;"></div>-->



<!--&lt;!&ndash;주소 검색을 위한 스크립트&ndash;&gt;-->
<!--<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>-->
<!--<script>-->
<!--    window.onload = function () {-->
<!--        document.getElementById("address_kakao").addEventListener("click", function () { //주소입력칸을 클릭하면-->
<!--            //카카오 지도 발생-->
<!--            new daum.Postcode({-->
<!--                oncomplete: function (data) { //선택시 입력값 세팅-->
<!--                    document.getElementById("address_kakao").value = data.address; // 주소 넣기-->
<!--                    // document.querySelector("input[name=address_detail]").focus(); //상세입력 포커싱-->
<!--                }-->
<!--            }).open();-->
<!--        });-->
<!--    }-->
<!--</script>-->
<!--<script>-->

<!--</script>-->


<!--&lt;!&ndash;카카오맵 스크립트&ndash;&gt;-->
<!--<script>-->

<!--    var cnt = 0;-->

<!--    var mapContainer = document.getElementById('map'), // 지도를 표시할 div-->
<!--        mapOption = {-->
<!--            center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표-->
<!--            level: 3 // 지도의 확대 레벨-->
<!--        };-->

<!--    // 지도를 생성합니다-->
<!--    var map = new kakao.maps.Map(mapContainer, mapOption);-->

<!--    function button1_click() {-->
<!--        console.log('위',cnt);-->
<!--        var address1 = document.getElementById('address_kakao').value;-->
<!--        // 주소-좌표 변환 객체를 생성합니다-->
<!--        var geocoder = new kakao.maps.services.Geocoder();-->
<!--        // 주소로 좌표를 검색합니다-->
<!--        geocoder.addressSearch(address1, function (result, status) {-->

<!--            // 정상적으로 검색이 완료됐으면-->
<!--            if (status === kakao.maps.services.Status.OK) {-->

<!--                var coords = new kakao.maps.LatLng(result[0].y, result[0].x);-->

<!--                // 결과값으로 받은 위치를 마커로 표시합니다-->
<!--                var marker = new kakao.maps.Marker({-->
<!--                    map: map,-->
<!--                    position: coords-->
<!--                });-->

<!--                // 인포윈도우로 장소에 대한 설명을 표시합니다-->
<!--                var infowindow = new kakao.maps.InfoWindow({-->
<!--                    content: '<div style="width:150px;text-align:center;padding:6px 0;">1</div>'-->
<!--                });-->
<!--                infowindow.open(map, marker);-->

<!--                // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다-->
<!--                map.setCenter(coords);-->
<!--            } else {-->
<!--                console.log('&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;에러&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;')-->
<!--            }-->
<!--        });-->
<!--        cnt++;-->
<!--        console.log('아래',cnt);-->
<!--    }-->
<!--</script>-->
<!--</body>-->
<!--</html>-->


